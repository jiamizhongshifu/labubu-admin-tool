# Jitata - 潮玩虚拟图鉴应用

一个创新的潮玩收集应用，让你轻松拍摄、收集和管理你的潮流玩具。

## ✨ 核心功能

### 📸 智能拍摄系统
- **真实相机预览**: 集成AVFoundation，提供实时相机画面
- **专业拍摄界面**: 
  - 左上角显示当天日期和拍摄提示
  - 中央280x280像素取景框，四角装饰线设计
  - 底部80像素圆形拍摄按钮和60像素方形相册入口
  - 黑色专业背景，营造拍摄氛围
- **权限管理**: 完善的相机权限检查和模拟器适配
- **拍摄状态指示**: 实时显示拍摄进度和状态

### 🖼️ 拍摄预览系统
- **智能预览界面**: 拍摄完成后自动跳转到预览页面
- **透明背景抠图**: AI自动抠图生成PNG格式的透明背景图像 ✨
- **操作按钮组**:
  - **裁剪按钮**: 支持图片裁剪功能
  - **确认按钮**: 保存到图鉴
  - **取消按钮**: 重新拍摄
- **识别模式切换**: 右上角按钮可切换显示原图或抠图结果
- **实时处理状态**: 显示图像处理进度

### 🎨 AI智能抠图与增强
- **透明背景生成**: 使用Vision框架生成真正的透明背景PNG图像 ✨
- **AI图片增强**: 集成OpenAI gpt-image-1模型，自动增强抠图后的主体图像 ✨
- **智能提示词**: 根据不同分类（手办、盲盒、积木、卡牌等）使用专门优化的提示词
- **多重算法支持**: 
  - Vision框架主体分离
  - VisionKit高级处理
  - 人像分割降级方案
- **智能降级机制**: 自动选择最佳处理方案
- **精确蒙版处理**: 使用CIBlendWithMask确保透明背景效果

### 📱 用户界面
- **现代化主页**: 渐变背景设计，卡片式功能入口
- **完善的导航系统**: ✨
  - 图鉴页面添加返回按钮
  - 清晰的导航栏标题显示
  - 一致的用户体验流程
- **响应式设计**: 适配不同iOS设备尺寸

### 🗂️ 图鉴管理
- **分类收藏**: 支持手办、盲盒、积木、卡牌等分类
- **智能搜索**: 按名称、分类、备注搜索
- **多视图模式**: 网格视图和列表视图切换
- **详细信息**: 每个潮玩包含完整的收藏信息
- **AI增强状态**: 显示图片增强进度和状态

## 🛠️ 技术栈

- **语言**：Swift 5.9+
- **框架**：SwiftUI
- **最低版本**：iOS 16.0+
- **核心技术**：
  - VisionKit：智能图像分析和背景移除
  - SwiftData：本地数据持久化
  - Core Image：图像处理和特效
  - AVFoundation：相机功能
  - OpenAI API：AI图片增强服务

## 🔧 开发环境配置

### 系统要求
- Xcode 15.0+
- iOS 16.0+ 模拟器或真机
- macOS 14.0+

### 环境变量配置
应用需要配置OpenAI API密钥以启用AI图片增强功能：

#### 方法一：环境变量（推荐）
```bash
export OPENAI_API_KEY="your_api_key_here"
```

#### 方法二：Info.plist配置（开发环境）
在项目的Info.plist中添加：
```xml
<key>OPENAI_API_KEY</key>
<string>your_api_key_here</string>
```

#### API密钥获取
- 访问 [api.tu-zi.com](https://api.tu-zi.com) 注册账号
- 创建API密钥时选择OpenAI、OpenAI原价或default分组
- 复制密钥并配置到环境变量中

**注意**: 请确保API密钥的安全性，不要将其提交到版本控制系统中。

## 📱 界面设计

### 拍照界面特色
- **黑色背景**：专业的拍照体验
- **日期显示**：左上角显示当前日期（如"6月04日"）
- **拍摄提示**：清晰的操作指导文字
- **取景框**：280x280的圆角矩形框，带有四角装饰线
- **拍摄按钮**：80px圆形白色按钮，简洁优雅
- **相册入口**：右下角60px方形按钮，便于选择已有照片

## 🚀 开发进度

- [x] **Phase 1: 基础架构** - 项目结构和数据模型
- [x] **Phase 2: 拍照功能** - 相机集成和图像处理
- [x] **Phase 3: 图鉴功能** - 收藏管理和展示
- [x] **Phase 4: 界面优化** - 现代化拍照界面设计
- [x] **Phase 5: 用户体验** - 主页设计和流程优化
- [x] **Phase 6: 预览系统** - 真实相机预览和拍摄预览
- [x] **Phase 7: 功能完善** - 分享、导出等高级功能
- [x] **Phase 8: 透明背景修复** - 修复抠图白色背景问题
- [x] **Phase 9: 导航体验优化** - 优化图鉴页面导航
- [x] **Phase 10: AI图片增强** - 集成OpenAI API实现智能图片增强

## 📋 最新更新

### v2.0.0 - AI图片增强功能
- 🤖 集成OpenAI gpt-image-1模型，实现AI图片增强
- 🎯 智能提示词管理，针对不同分类优化增强效果
- 🔄 自动增强流程，保存图片后自动触发AI增强
- 📊 增强状态管理，实时显示处理进度
- 🎨 优先显示增强后的图片，提升视觉效果
- 🔧 环境变量配置，安全管理API密钥
- 💾 智能存储管理，为Supabase迁移做准备

### v1.4.0 - 新增真实相机预览和拍摄预览
- 🎨 全新的拍照界面设计
- 📅 添加日期显示功能
- 🎯 精美的取景提示框
- 🔘 优化拍摄按钮和相册入口布局
- 🐛 修复编译警告和代码优化
- 🎨 新增真实相机预览和拍摄预览功能
- 🎨 实时显示拍摄进度和状态

## 📝 使用说明

1. **环境配置**：配置OpenAI API密钥到环境变量
2. **进入应用**：启动后看到精美的主页，选择功能入口
3. **拍照收集**：点击"拍照收集"进入拍摄界面
4. **实时预览**：查看相机画面和取景框
5. **点击拍摄**：自动拍照并处理
6. **预览确认**：查看抠图结果，可裁剪调整
7. **保存收藏**：为你的潮玩起个名字，选择分类，保存到图鉴
8. **AI增强**：系统自动调用AI服务增强图片质量
9. **管理查看**：在"我的图鉴"中查看和管理所有收藏

## 🎯 设计理念

Jitata致力于为潮玩爱好者提供最简单、最智能的收集体验。通过先进的AI技术和精美的界面设计，让每一次拍摄都成为艺术创作。AI增强功能让普通的拍摄照片变得更加精美，为每个潮玩创造独特的数字身份。

## 📚 技术文档

- [VisionKit 官方文档](https://developer.apple.com/documentation/visionkit)
- [OpenAI API 文档](https://api.tu-zi.com)

---

*让每个潮玩都有自己的数字身份* 🎭 